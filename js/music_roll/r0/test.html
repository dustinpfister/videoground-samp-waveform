<html>
<head>

<style>
th{
  padding: 10px;
  background: #4a4a4a;
}
td{
  padding: 10px;
  background: #9a9a9a;
}
</style>
</head>

<div id="out">
</div>

<script src="./music_roll.js"></script>
<script>

const song = `
# this is then a commnet
-- -; -- -;
-- -; -- -;
-- -; -- -;
f5 1; c1 1;
-- -; -- -;
f5 1; -- -;
-- -; -- -;
f5 1; -- -;
-- -; -- -;
g5 1; -- -;
-- -; -- -;
f5 1;  0 0;
-- -; -- -;
f5 1; -- -;
-- -; -- -;
c5 1; -- -;
-- -; -- -;
-- -; -- -;
-- -; -- -;
 0 0; -- -;
`;

const out = document.querySelector('#out')
const song_obj = Music_roll.parse( song );
const result = song_obj.line_objects;

let html = '<table><tr><th>line</th>';
result[0].forEach( (a, i_track) => {
    html += '<th>track: ' + i_track +'</th>';
});
html += '</tr>';
result.forEach( (a, i_line) => {
    html += '<tr><td> ' + i_line + ') </td>';
    a.forEach( (b, i_track) => {
        html += '<td> freq: ' + b.frequency  + '; amp: ' + b.amplitude + '; ' + b.n + '/' + b.d + '</td>';
    });
    html += '</tr>';
});
out.innerHTML = html + '</table>';

let i_alpha = 0;
const count = 300;
while( i_alpha < count ){

    const array_samp = Music_roll.play(song_obj, i_alpha / count);
    const obj = array_samp[0];
    console.log( obj.frequency, obj.n, obj.d, obj.a_note );
    i_alpha += 1;

}

</script>

</html>
